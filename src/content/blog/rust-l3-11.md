---
title: æ¨¡å—åŒ–
pubDatetime: 2024-10-7T13:12:00+08:00
author: shushunie
slug: rust-l3-11
description: ""
---

## Package å’Œ Crate

#### create

Crate æ˜¯ Rust ç¼–è¯‘å™¨åœ¨ç¼–è¯‘æ—¶æœ€å°çš„ä»£ç å•ä½ã€‚æ— è®ºæ˜¯ä½¿ç”¨Â `rustc`Â è¿˜æ˜¯Â `cargo`Â ç¼–è¯‘ï¼ŒRust éƒ½ä¼šå°†æ¯ä¸ªæºæ–‡ä»¶è§†ä¸ºä¸€ä¸ª crate

Crate å¯ä»¥æœ‰ä¸¤ç§å½¢å¼ï¼š

- **äºŒè¿›åˆ¶ crate**ï¼šå¯ä»¥è¢«ç¼–è¯‘ä¸ºå¯æ‰§è¡Œç¨‹åºï¼Œå¿…é¡»åŒ…å«ä¸€ä¸ªÂ `main`Â å‡½æ•°ã€‚ä¾‹å¦‚ï¼Œå‘½ä»¤è¡Œåº”ç”¨ç¨‹åºæˆ– Web æœåŠ¡å™¨

- **åº“ crate**ï¼šä¸åŒ…å«Â `main`Â å‡½æ•°ï¼Œæä¾›å‡½æ•°å’Œç±»å‹ä¾›å…¶ä»–é¡¹ç›®ä½¿ç”¨ï¼Œä¾‹å¦‚Â `rand`Â crate ç”¨äºç”Ÿæˆéšæœºæ•°

#### package

`Package`Â å°±æ˜¯ä¸€ä¸ªé¡¹ç›®ï¼Œå› æ­¤å®ƒåŒ…å«æœ‰ç‹¬ç«‹çš„Â `Cargo.toml`Â æ–‡ä»¶ï¼Œä»¥åŠå› ä¸ºåŠŸèƒ½æ€§è¢«ç»„ç»‡åœ¨ä¸€èµ·çš„ä¸€ä¸ªæˆ–å¤šä¸ªåŒ…ã€‚ä¸€ä¸ªÂ `Package`Â åªèƒ½åŒ…å«**ä¸€ä¸ª**åº“(library)ç±»å‹çš„åŒ…ï¼Œä½†æ˜¯å¯ä»¥åŒ…å«**å¤šä¸ª**äºŒè¿›åˆ¶å¯æ‰§è¡Œç±»å‹çš„åŒ…

#### ä¸¾ä¾‹

ğŸ“¦ my-project\
 â”£ ğŸ“‚ src\
 â”ƒ â”£ ğŸ¦€ main.rs\
 â”ƒ â”£ ğŸ¦€ lib.rs\
 â”ƒ â”— ğŸ“‚ bin\
 â”ƒ â”£ ğŸ¦€ main1.rs\
 â”ƒ â”— ğŸ¦€ main2.rs\
 â”£ ğŸ“‚ tests\
 â”ƒ â”— ğŸ§ª some_integration_tests.rs\
 â”£ ğŸ“‚ benches\
 â”ƒ â”— ğŸ§ª simple_bench.rs\
 â”£ ğŸ“‚ examples\
 â”ƒ â”— ğŸ“œ simple_example.rs\
 â”£ âš™ï¸ Cargo.lock\
 â”— ğŸ“œ Cargo.toml

- å”¯ä¸€åº“åŒ…ï¼š`src/lib.rs`
- é»˜è®¤äºŒè¿›åˆ¶åŒ…ï¼š`src/main.rs`ï¼Œç¼–è¯‘åç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ä¸Â `Package`Â åŒå
- å…¶ä½™äºŒè¿›åˆ¶åŒ…ï¼š`src/bin/main1.rs`Â å’ŒÂ `src/bin/main2.rs`ï¼Œå®ƒä»¬ä¼šåˆ†åˆ«ç”Ÿæˆä¸€ä¸ªæ–‡ä»¶åŒåçš„äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶
- é›†æˆæµ‹è¯•æ–‡ä»¶ï¼š`tests`Â ç›®å½•ä¸‹
- åŸºå‡†æ€§èƒ½æµ‹è¯•Â `benchmark`Â æ–‡ä»¶ï¼š`benches`Â ç›®å½•ä¸‹
- é¡¹ç›®ç¤ºä¾‹ï¼š`examples`Â ç›®å½•ä¸‹

## æ¨¡å— Module

#### åˆ›å»ºæ¨¡å—

åœ¨ Rust ä¸­ï¼Œæ¯ä¸ª `.rs` æ–‡ä»¶éƒ½å¯ä»¥çœ‹ä½œä¸€ä¸ªæ¨¡å—ã€‚æ–‡ä»¶å†…éƒ¨ä¹Ÿå¯ä»¥é€šè¿‡ `mod` å…³é”®å­—æ¥å®šä¹‰å­æ¨¡å—ï¼Œå¹¶ä¸”æ¨¡å—ä¹‹é—´å¯ä»¥åµŒå¥—

```rust
mod front_of_house {
    mod hosting {
        fn add_to_waitlist() {}

        fn seat_at_table() {}
    }
}

```

#### å¼•ç”¨æ¨¡å—

å¯ä»¥ä½¿ç”¨ç›¸å¯¹è·¯å¾„æˆ–ç»å¯¹è·¯å¾„æ¥å¼•ç”¨æ¨¡å—

- **ç»å¯¹è·¯å¾„**ï¼Œå½“å‰ creat çš„ src ç›®å½•ä½œä¸ºæ ¹è·¯å¾„ï¼Œè·¯å¾„åä»¥åŒ…åæˆ–è€…Â `crate`Â ä½œä¸ºå¼€å¤´
- **ç›¸å¯¹è·¯å¾„**ï¼Œå½“å‰æ¨¡å—ä½œä¸ºæ ¹è·¯å¾„ï¼Œè·¯å¾„åä»¥Â `self`ï¼Œ`super`Â æˆ–æ¨¡å—çš„åç§°ä½œä¸ºå¼€å¤´
  - `self`ï¼Œè¡¨ç¤ºå½“å‰æ¨¡å—è·¯å¾„ï¼Œå¯ä»¥ç›´æ¥çœç•¥
  - `super`ï¼Œè¡¨ç¤ºçˆ¶æ¨¡å—è·¯å¾„ï¼Œç±»ä¼¼æ–‡ä»¶ç³»ç»Ÿä¸­çš„ `..`
  - æ¨¡å—çš„åç§°ï¼Œè¡¨ç¤ºåŒ¹é…çš„æ¨¡å—çš„è·¯å¾„

Rust å‡ºäºå®‰å…¨çš„è€ƒè™‘ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰çš„ç±»å‹éƒ½æ˜¯ç§æœ‰åŒ–çš„ï¼ŒåŒ…æ‹¬å‡½æ•°ã€æ–¹æ³•ã€ç»“æ„ä½“ã€æšä¸¾ã€å¸¸é‡ã€‚çˆ¶æ¨¡å—å®Œå…¨æ— æ³•è®¿é—®å­æ¨¡å—ä¸­çš„ç§æœ‰é¡¹ï¼Œä½†æ˜¯å­æ¨¡å—å´å¯ä»¥è®¿é—®çˆ¶æ¨¡å—ã€‚å› æ­¤ï¼Œåœ¨è¿›è¡Œé“¾å¼è°ƒç”¨æ—¶ï¼Œéœ€è¦ä¸ºæ¨¡å—ä¸­çš„å†…å®¹é¡¹æ·»åŠ  `pub`Â å…³é”®å­—

```rust
mod front_of_house {
    pub mod hosting {
        pub fn add_to_waitlist() {}
    }
}

pub fn eat_at_restaurant() {
    // ç»å¯¹è·¯å¾„
    crate::front_of_house::hosting::add_to_waitlist();

    // ç›¸å¯¹è·¯å¾„
    front_of_house::hosting::add_to_waitlist();
}
```

#### é™åˆ¶å¯è§æ€§

`pub(in crate::a)` çš„å†™æ³•å¯ä»¥é™åˆ¶æ¨¡å—çš„å¯è§æ€§

- `pub`Â æ„å‘³ç€å¯è§æ€§æ— ä»»ä½•é™åˆ¶
- `pub(crate)`Â è¡¨ç¤ºåœ¨å½“å‰åŒ…å¯è§
- `pub(self)`Â åœ¨å½“å‰æ¨¡å—å¯è§
- `pub(super)`Â åœ¨çˆ¶æ¨¡å—å¯è§
- `pub(in <path>)`Â è¡¨ç¤ºåœ¨æŸä¸ªè·¯å¾„ä»£è¡¨çš„æ¨¡å—ä¸­å¯è§ï¼Œå…¶ä¸­Â `path`Â å¿…é¡»æ˜¯çˆ¶æ¨¡å—æˆ–è€…ç¥–å…ˆæ¨¡å—

## ä½¿ç”¨ use

å¦‚æœä»£ç ä¸­ï¼Œé€šç¯‡éƒ½æ˜¯Â `crate::front_of_house::hosting::add_to_waitlist`Â è¿™æ ·çš„å‡½æ•°è°ƒç”¨å½¢å¼ï¼Œä»£ç é‡å¤åº¦å¤ªé«˜ï¼Œå¯è¯»æ€§å¾ˆå·®ã€‚åœ¨ Rust ä¸­ï¼Œå¯ä»¥ä½¿ç”¨Â `use`Â å…³é”®å­—æŠŠè·¯å¾„æå‰å¼•å…¥åˆ°å½“å‰ä½œç”¨åŸŸä¸­ï¼Œéšåçš„è°ƒç”¨å°±å¯ä»¥çœç•¥è¯¥è·¯å¾„ï¼Œæå¤§åœ°ç®€åŒ–äº†ä»£ç 

```rust
mod front_of_house {
    pub mod hosting {
        pub fn add_to_waitlist() {}
    }
}

use front_of_house::hosting::add_to_waitlist;

pub fn eat_at_restaurant() {
    add_to_waitlist();
    add_to_waitlist();
    add_to_waitlist();
}
```

#### use ä½¿ç”¨æŠ€å·§

`use` å¼•ç”¨çš„è·¯å¾„å¯ä»¥ä½¿ç”¨ç»å¯¹è·¯å¾„æˆ–ç›¸å¯¹è·¯å¾„

å½“å‡ºç°åŒåæ¨¡å—æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ `as` å…³é”®å­—é‡å‘½å

å½“å¤–éƒ¨çš„æ¨¡å—é¡¹Â `A`Â è¢«å¼•å…¥åˆ°å½“å‰æ¨¡å—ä¸­æ—¶ï¼Œå®ƒçš„å¯è§æ€§è‡ªåŠ¨è¢«è®¾ç½®ä¸ºç§æœ‰çš„ã€‚å¦‚æœæƒ³ä»å½“å‰æ¨¡å—ç›´æ¥å¼•å…¥æ¨¡å— `A` ï¼Œå¯ä»¥ä½¿ç”¨ `pub` å…³é”®å­—å¯¼å‡ºå¼•å…¥çš„æ¨¡å— `A`

åœ¨ `Cargo.toml`Â æ–‡ä»¶Â `[dependencies]`Â åŒºåŸŸå£°æ˜çš„ç¬¬ä¸‰æ–¹åŒ…ï¼Œæ¯”å¦‚ `rand = "0.8.3"` å¯ä»¥ç›´æ¥å¼•å…¥

é¡¹ç›®ä¸­ï¼Œä¸€ä¸ªå¤§å‹æ¨¡å—é€šå¸¸åŒ…å«å¤šä¸ªå­—æ¨¡å—é¡¹ï¼Œå¯ä»¥ä½¿ç”¨Â `{}`Â æ¥ä¸€èµ·å¼•å…¥è¿›æ¥ï¼Œå‡å°‘ `use` è¯­å¥ä»£ç é‡å¤

ä½¿ç”¨ \* å¯ä»¥ç›´æ¥å¼•å…¥æ¨¡å—ä¸‹çš„æ‰€æœ‰å…¬å…±é¡¹

```rust
use crate::front_of_house::hosting;
use front_of_house::hosting::add_to_waitlist;

use std::fmt::Result;
use std::io::Result as IoResult;

pub use crate::front_of_house::hosting;

use rand::Rng;

use std::collections::{HashMap,BTreeMap,HashSet};
use std::{cmp::Ordering, io};

use std::collections::*;
```
